{
  "experiment": {
    "name": "federated_a2v_generator_sequential_classes_reset",
    "description": "Training generators with class reset - useful for sequential class training scenarios",
    "use_balooning": true,
    "optimize_memory_usage": true
  },
  "federation": {
    "algorithm": "FedA2V",
    "diffusion_type": "flux",
    "num_clients": 3,
    "global_rounds": 30,
    "local_epochs": 3,
    "eval_gap": 5,
    "model_aggregation": "per_class_average",
    "use_saved_audio_embeddings": false
  },
  "training": {
    "learning_rate": 0.001,
    "optimizer": "AdamW",
    "batch_size": 8,
    "weight_decay": 0.0001
  },
  "feda2v": {
    "_comment_mode": "=== GENERATOR TRAINING MODE WITH CLASS RESET ===",
    "train_adapters": false,
    "use_generator": true,
    "generator_type": "vae",
    "generator_training_mode": true,
    "generator_only_mode": true,
    "use_pretrained_generators": false,

    "_comment_granularity": "=== GENERATOR GRANULARITY ===",
    "_comment_granularity_note": "Options: 'unified' (1 generator for all classes), 'per_class' (1 per class), 'per_group' (1 per group)",
    "generator_granularity": "per_class",
    "generator_class_groups": null,

    "_comment_sharing": "=== GENERATOR SHARING AND RESET ===",
    "_comment_shared_generator": "If true, all nodes share the same generator instance in generator_only_mode",
    "shared_generator_in_only_mode": true,
    "_comment_reset_on_class_change": "If true, resets generator parameters when training on new classes - ENABLED for sequential class training",
    "reset_generator_on_class_change": true,

    "_comment_checkpoint": "=== CHECKPOINT SETTINGS ===",
    "generator_checkpoint_dir": "checkpoints/generators_sequential",
    "generator_checkpoint_base_name": "vae_per_class_reset",
    "generator_save_checkpoint": true,
    "generator_load_checkpoint": false,
    "generator_checkpoint_frequency": 5,

    "_comment_training": "=== GENERATOR TRAINING SETTINGS ===",
    "generator_training_epochs": 10,
    "generator_augmentation": true,
    "generator_augmentation_noise": 0.1,
    "generator_validation_frequency": 5,

    "_comment_adapter": "=== ADAPTER SETTINGS ===",
    "adapter_aggregation_mode": "avg",
    "global_model_train": false,
    "global_model_train_epochs": 0,
    "global_model_train_from_nodes_adapters": false,

    "t5_adapter_learning_rate": 0.001,
    "clip_adapter_learning_rate": 0.001,
    "t5_adapter_weight_decay": 0.0001,
    "clip_adapter_weight_decay": 0.0001,
    "adapters_learning_rate": 0.001,
    "adapters_weight_decay": 0.0001,

    "adapters_learning_rate_schedule": false,
    "t5_adapter_learning_rate_schedule": false,
    "clip_adapter_learning_rate_schedule": true,

    "_comment_generation": "=== IMAGE GENERATION (disabled in training mode) ===",
    "generate_nodes_images_frequency": 0,
    "generate_global_images_frequency": 0,
    "generate_low_memomy_footprint": true,
    "images_output_dir": "output_images",
    "generate_from_clip_text_embeddings": false,
    "generate_from_t5_text_embeddings": false,

    "store_audio_embeddings": false,
    "audio_embedding_file_name": null
  },
  "nodes": {
    "_comment_sequential_setup": "Each node starts with different classes, simulating sequential class arrival scenario",
    "0": {
      "dataset": "ESC50",
      "selected_classes": ["dog"],
      "train_folds": [0, 1, 2, 3],
      "test_folds": [4],
      "diffusion_type": "flux",
      "_comment": "Node 0: Starts with dog class, can add rooster, pig, cow, frog in later rounds"
    },
    "1": {
      "dataset": "ESC50",
      "selected_classes": ["rain"],
      "train_folds": [0, 1, 2, 3],
      "test_folds": [4],
      "diffusion_type": "flux",
      "_comment": "Node 1: Starts with rain class, can add sea_waves, crackling_fire, etc. in later rounds"
    },
    "2": {
      "dataset": "ESC50",
      "selected_classes": ["helicopter"],
      "train_folds": [0, 1, 2, 3],
      "test_folds": [4],
      "diffusion_type": "flux",
      "_comment": "Node 2: Starts with helicopter class, can add chainsaw, siren, etc. in later rounds"
    }
  },
  "model": {
    "backbone": "a2v",
    "backbone_model": "hf_vit",
    "pretrained": false
  },
  "dataset": {
    "name": "ESC50",
    "path": "./data"
  },
  "wandb": {
    "disabled": false
  }
}
